<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<i>{{headerForm.value|json}}</i>
<!--TODO: click-->
<jsb-menu *ngIf="showTooltip"
          [coords]="_coords"
          (dblclick)="$event.stopPropagation()"
          (mouseover)="$event.stopPropagation()"
          (action$)="sidebarActionHandler($event)"
          (showTooltip$)="showTooltip = $event"></jsb-menu>

<div class="jsb-editor-wrapper"
     (dblclick)="$event.stopPropagation()" [ngStyle]="{'top': top,left:left, right:right, bottom:bottom}"
     *ngIf="!minimize">

  <jsb-editor-header
    [componentFiles]="_componentfiles"
    [componentKeys]="keyOptions"
    [headerForm]="headerForm"
    [minimize]="minimize"
    [path]="path"
    (path$)="pathChangedHandler($event);"
    [expand]="expand"
    [activeTab]="activeHeaderTab"
    (action$)="sidebarActionHandler($event)"
    (headerDataChanged$)="headerDataChangedHandler($event)"></jsb-editor-header>

  <div class="jsb-editor-wrapper-body" style="position: relative;" *ngIf="!minimize">


    <jsb-editor-sidebar (action$)="sidebarActionHandler($event)"
                        [config]="config"
                        [shouldFoldCode]="shouldFoldCode"
                        [activeHeaderTab]="activeHeaderTab"></jsb-editor-sidebar>

    <jsb-editor
      style="border-right: 3px solid #aaa; flex-grow: 0; flex-shrink: 0; flex-basis: 50%; max-width: 50%"
      [level]="headerFormData.key==='All'?3:6"
      [codeText]="fileData"
      [shouldFoldCode]="shouldFoldCode"></jsb-editor>

    <app-object-tray
      *ngIf="!headerForm.get('editorMode').value"
      [obj]="codeData"
      (path$)="pathChangedHandler($event);"
      [path]="path"
      [shouldFoldCode]="!shouldFoldCode"
      style="width: 100%; height: 100%; background-color: #0a001f;overflow-y: scroll;flex-grow: 0; flex-shrink: 0">
    </app-object-tray>
    <!--<i>{{codeData|json}}</i>-->
    <!--<app-js-console-->
    <!--style="width: 100%; height: 100%; background-color: rgb(42, 47, 58);overflow-y: scroll"></app-js-console>-->
    <jsb-editor *ngIf="headerForm.get('editorMode').value"
                style="flex-grow: 0; flex-shrink: 0"
                [level]="headerFormData.key==='All'?3:6"
                [codeText]="codeData|objectByPath:path"
                [shouldFoldCode]="shouldFoldCode"></jsb-editor>

    <jsb-file-search-panel
      (showSearchPanel$)="showSearchPanel=$event"
      *ngIf="showSearchPanel"
      (getFileTrigger$)="getFileTriggerHandler($event)"
      (searchEvent$)="searchTrigger$.emit($event);"></jsb-file-search-panel>
  </div>
</div>

<div *ngIf="minimize"
     style="background-color: rgb(60, 60, 60); position: fixed; padding: 10px; cursor: pointer; bottom: 0; right: 10px"
     (click)="minimize = false"
>
  <i class="fa fa-window-maximize" style="color: white"></i>
</div>
<!--<div>this is editor</div>-->